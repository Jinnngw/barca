# AI角色扮演网站 - 需求文档

## 1. 项目背景

- 本项目目标：开发一个利用 AI 进行角色扮演的网页，用户可以选择感兴趣的角色（如哈利波特、苏格拉底等）并进行语音聊天。

## 2. 功能需求

### 2.1 核心功能（P0）

#### 1. 语音交互：支持语音输入（ASR）、大模型生成、语音输出（TTS），并保证低延迟。

**语音输入：**
- 支持实时语音录制
- 录音时长限制：30秒内
- 支持录音重试和取消

**大模型生成：**
- 生成内容符合角色设定
- 支持上下文理解
- 回复长度适中（50-200字）

**语音输出：**
- 语音质量清晰自然
- 支持不同角色的声音特色
- 播放速度可调节

#### 2. 角色设定：角色拥有固定的性格、语言风格与背景设定，不可出戏。

**角色性格设定：**
- 每个角色有独特的性格特征
- 性格特征在对话中保持一致
- 支持性格标签和描述

**语言风格：**
- 每个角色有独特的说话方式
- 支持不同时代的语言风格
- 保持语言风格的一致性

**背景设定：**
- 角色有详细的历史背景
- 支持角色相关的知识问答
- 背景信息影响对话内容

#### 3. 角色搜索系统 
- 6个预设角色（哈利波特、苏格拉底、爱因斯坦、莎士比亚、居里夫人、孔子）
- 按分类筛选（文学、哲学、科学）
- 关键词搜索功能
- 角色卡片展示
- 在线状态指示器

#### 4. 基础记忆：会话中记住用户姓名、当前场景，保持连续性。

**用户信息记忆：**
- 记住用户姓名
- 记住用户偏好
- 记住对话历史

**场景记忆：**
- 记住当前对话主题
- 记住对话上下文
- 支持场景切换

####5. 聊天界面 
- 参考图片风格的聊天界面
- 角色背景图展示
- 对话气泡设计
- 消息时间戳
- 打字指示器动画
- 欢迎消息界面

####6. 用户体验优化 
-快速回复功能
-自动滚动到底部
-输入框自动调整高度
-语音输出开关
-错误处理和用户提示

### 2.2 扩展功能（P1）

#### 1. 剧情/场景检索（RAG）：从设定文档中检索相关资料，减少幻觉。

**知识库构建：**
- 角色相关的历史资料
- 文学作品和背景知识
- 角色名言和经典对话

#### 2. 多样化语音风格：支持不同语气、情感的语音输出。

**情感表达：**
- 支持高兴、悲伤、愤怒等情感
- 情感与对话内容匹配
- 情感变化自然

**语气变化：**
- 支持疑问、感叹、陈述等语气
- 语气与角色性格匹配
- 语气变化流畅

**个性化声音：**
- 每个角色有独特的声音特色
- 声音与角色形象匹配

#### 3. 内容安全：自动过滤敏感内容，保证合规。

**内容检测：**
- 检测敏感词汇
- 检测不当内容
- 检测政治敏感内容

**过滤机制：**
- 自动替换敏感内容
- 拒绝不当请求
- 记录安全事件

**合规保证：**
- 符合相关法律法规
- 保护用户隐私
- 内容审核机制

#### 4. 多模态交互：支持图片、文字、语音等多种交互方式。

**图片上传：**
- 用户可上传图片与角色分享
- 支持常见图片格式（JPG、PNG、GIF）
- 图片大小限制和压缩
- 图片内容识别和分析

**多角色对话：**
- 同时与多个角色对话
- 角色之间可以相互交流
- 群体场景模拟
- 角色关系影响对话内容

**多语言支持：**
- 支持多种语言对话
- 实时语言翻译
- 语言自动检测

## 3. 技术框架

### 3.1 前端技术栈

**核心框架：**
- Vue 3 + Composition API
- Vue Router 4（路由管理）
- Pinia（状态管理）
- Vite（构建工具）

**样式系统：**
- SCSS（样式预处理器）
- 响应式设计（移动端适配）

**语音功能：**
- Web Speech API（语音识别和合成）
- MediaRecorder API（语音录制）

**UI组件：**
- 自定义组件库
- SVG图标系统
- 动画效果（CSS3 + Vue Transition）

## 4. 分工

| 角色 | 负责人 | 职责 |
|------|--------|------|
| AI | 贺辰飞 |  |
| 前端 | 王静 | Vue.js开发、UI/UX设计 |
| 后端 | 米芮林 |  |